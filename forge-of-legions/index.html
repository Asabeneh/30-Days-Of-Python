<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Forge of Legions - A tactical miniature wargame. Build armies, paint units, conquer realms!">
    <title>Forge of Legions</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/battlefield.css">
    <link rel="stylesheet" href="src/css/ui.css">
    <link rel="stylesheet" href="src/css/painting.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="src/assets/images/icon-192.png">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-content">
            <h1 class="game-title">FORGE OF LEGIONS</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Marshaling your forces...</p>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="main-menu" class="screen">
        <div class="menu-content">
            <h1 class="game-title">FORGE OF LEGIONS</h1>
            <p class="tagline">Build. Paint. Conquer.</p>

            <div class="menu-buttons">
                <button class="menu-btn primary" id="btn-campaign">
                    <span class="btn-icon">‚öîÔ∏è</span>
                    <span class="btn-text">Campaign</span>
                </button>
                <button class="menu-btn" id="btn-skirmish">
                    <span class="btn-icon">üéØ</span>
                    <span class="btn-text">Quick Battle</span>
                </button>
                <button class="menu-btn" id="btn-multiplayer">
                    <span class="btn-icon">üë•</span>
                    <span class="btn-text">Multiplayer</span>
                </button>
                <button class="menu-btn" id="btn-armory">
                    <span class="btn-icon">üõ°Ô∏è</span>
                    <span class="btn-text">Armory</span>
                </button>
                <button class="menu-btn" id="btn-painting">
                    <span class="btn-icon">üé®</span>
                    <span class="btn-text">Paint Studio</span>
                </button>
                <button class="menu-btn" id="btn-tutorial">
                    <span class="btn-icon">üìñ</span>
                    <span class="btn-text">Learn to Play</span>
                </button>
                <button class="menu-btn small" id="btn-settings">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    <span class="btn-text">Settings</span>
                </button>
            </div>

            <div class="player-info">
                <div class="player-rank">Commander <span id="player-name">Recruit</span></div>
                <div class="player-stats">
                    <span class="stat">Victories: <span id="stat-victories">0</span></span>
                    <span class="stat">Units: <span id="stat-units">3</span></span>
                    <span class="stat">Gold: <span id="stat-gold">500</span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Campaign Screen -->
    <div id="campaign-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" data-target="main-menu">‚Üê Back</button>
            <h2>Campaign: The Shattered Realms</h2>
        </div>
        <div class="campaign-map" id="campaign-map">
            <!-- Campaign nodes will be generated by JS -->
        </div>
        <div class="campaign-info">
            <div id="mission-details" class="mission-panel">
                <h3>Select a Mission</h3>
                <p>Choose a battle on the map to begin</p>
            </div>
        </div>
    </div>

    <!-- Army Builder Screen -->
    <div id="armory-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" data-target="main-menu">‚Üê Back</button>
            <h2>Armory</h2>
            <div class="army-points">
                Points: <span id="army-points">0</span> / <span id="max-points">1000</span>
            </div>
        </div>
        <div class="armory-content">
            <div class="unit-roster" id="unit-roster">
                <!-- Available units -->
            </div>
            <div class="army-list" id="army-list">
                <h3>Your Army</h3>
                <div id="selected-units"></div>
                <button class="btn-save-army" id="btn-save-army">Save Army</button>
            </div>
        </div>
    </div>

    <!-- Paint Studio -->
    <div id="painting-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" data-target="main-menu">‚Üê Back</button>
            <h2>Paint Studio</h2>
        </div>
        <div class="painting-content">
            <div class="unit-preview" id="paint-preview">
                <canvas id="paint-canvas" width="400" height="400"></canvas>
            </div>
            <div class="painting-tools">
                <div class="unit-selector">
                    <h3>Select Unit</h3>
                    <div id="paint-unit-list"></div>
                </div>
                <div class="color-palette">
                    <h3>Colors</h3>
                    <div id="color-swatches"></div>
                    <input type="color" id="custom-color" value="#8B0000">
                </div>
                <div class="paint-parts">
                    <h3>Unit Parts</h3>
                    <div id="part-selector"></div>
                </div>
                <button class="btn-save-scheme" id="btn-save-scheme">Save Scheme</button>
            </div>
        </div>
    </div>

    <!-- Battlefield -->
    <div id="battlefield-screen" class="screen">
        <div class="battle-header">
            <div class="player-panel player-1">
                <span class="player-name" id="p1-name">You</span>
                <div class="unit-count" id="p1-units">Units: 5</div>
            </div>
            <div class="turn-indicator">
                <span id="turn-number">Turn 1</span>
                <span id="current-phase">Movement Phase</span>
            </div>
            <div class="player-panel player-2">
                <span class="player-name" id="p2-name">Enemy</span>
                <div class="unit-count" id="p2-units">Units: 5</div>
            </div>
        </div>

        <div class="battlefield-container">
            <canvas id="battlefield-canvas"></canvas>
            <div id="battlefield-grid" class="battlefield-grid">
                <!-- Grid cells generated by JS -->
            </div>
        </div>

        <div class="battle-ui">
            <div class="selected-unit-info" id="selected-unit-info">
                <div class="unit-portrait" id="unit-portrait"></div>
                <div class="unit-stats">
                    <h4 id="unit-name">Select a Unit</h4>
                    <div class="stat-bars">
                        <div class="stat-bar health">
                            <span class="label">HP</span>
                            <div class="bar"><div class="fill" id="unit-hp"></div></div>
                            <span class="value" id="unit-hp-text">-</span>
                        </div>
                        <div class="stat-bar attack">
                            <span class="label">ATK</span>
                            <span class="value" id="unit-atk">-</span>
                        </div>
                        <div class="stat-bar defense">
                            <span class="label">DEF</span>
                            <span class="value" id="unit-def">-</span>
                        </div>
                        <div class="stat-bar movement">
                            <span class="label">MOV</span>
                            <span class="value" id="unit-mov">-</span>
                        </div>
                    </div>
                </div>
                <div class="unit-abilities" id="unit-abilities"></div>
            </div>

            <div class="action-buttons">
                <button class="action-btn" id="btn-move" disabled>
                    <span class="icon">ü¶∂</span> Move
                </button>
                <button class="action-btn" id="btn-attack" disabled>
                    <span class="icon">‚öîÔ∏è</span> Attack
                </button>
                <button class="action-btn" id="btn-ability" disabled>
                    <span class="icon">‚ú®</span> Ability
                </button>
                <button class="action-btn" id="btn-end-turn">
                    <span class="icon">‚è≠Ô∏è</span> End Turn
                </button>
            </div>
        </div>

        <button class="btn-menu" id="btn-battle-menu">‚ò∞</button>
    </div>

    <!-- Multiplayer Lobby -->
    <div id="multiplayer-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" data-target="main-menu">‚Üê Back</button>
            <h2>Multiplayer</h2>
        </div>
        <div class="multiplayer-content">
            <div class="lobby-options">
                <button class="lobby-btn" id="btn-create-game">Create Game</button>
                <button class="lobby-btn" id="btn-join-game">Join Game</button>
                <button class="lobby-btn" id="btn-quick-match">Quick Match</button>
            </div>
            <div class="game-code-section" id="game-code-section" style="display:none;">
                <h3>Game Code</h3>
                <div class="code-display" id="game-code">----</div>
                <p>Share this code with your opponent</p>
                <div class="waiting-indicator">Waiting for opponent...</div>
            </div>
            <div class="join-section" id="join-section" style="display:none;">
                <h3>Enter Game Code</h3>
                <input type="text" id="join-code-input" maxlength="4" placeholder="XXXX">
                <button class="btn-join" id="btn-submit-code">Join</button>
            </div>
            <div class="lobby-players" id="lobby-players">
                <!-- Player list -->
            </div>
        </div>
    </div>

    <!-- Tutorial Screen -->
    <div id="tutorial-screen" class="screen">
        <div class="tutorial-content">
            <div class="tutorial-header">
                <button class="back-btn" data-target="main-menu">‚Üê Skip Tutorial</button>
                <div class="tutorial-progress">
                    <span id="tutorial-step">1</span> / <span id="tutorial-total">8</span>
                </div>
            </div>
            <div class="tutorial-body" id="tutorial-body">
                <!-- Tutorial content loaded by JS -->
            </div>
            <div class="tutorial-actions">
                <button class="tutorial-btn" id="btn-tutorial-prev" disabled>Previous</button>
                <button class="tutorial-btn primary" id="btn-tutorial-next">Next</button>
            </div>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" data-target="main-menu">‚Üê Back</button>
            <h2>Settings</h2>
        </div>
        <div class="settings-content">
            <div class="setting-item">
                <label>Sound Effects</label>
                <input type="range" id="sfx-volume" min="0" max="100" value="80">
            </div>
            <div class="setting-item">
                <label>Music</label>
                <input type="range" id="music-volume" min="0" max="100" value="60">
            </div>
            <div class="setting-item">
                <label>Battle Speed</label>
                <select id="battle-speed">
                    <option value="slow">Slow</option>
                    <option value="normal" selected>Normal</option>
                    <option value="fast">Fast</option>
                </select>
            </div>
            <div class="setting-item">
                <label>Grid Overlay</label>
                <input type="checkbox" id="show-grid" checked>
            </div>
            <div class="setting-item">
                <label>Player Name</label>
                <input type="text" id="player-name-input" maxlength="20" placeholder="Commander">
            </div>
            <button class="btn-save-settings" id="btn-save-settings">Save Settings</button>
            <button class="btn-reset-progress" id="btn-reset-progress">Reset Progress</button>
        </div>
    </div>

    <!-- Battle Results Modal -->
    <div id="battle-results" class="modal">
        <div class="modal-content">
            <h2 id="result-title">Victory!</h2>
            <div class="result-stats">
                <div class="stat-item">
                    <span class="label">Units Lost</span>
                    <span class="value" id="result-losses">0</span>
                </div>
                <div class="stat-item">
                    <span class="label">Enemies Defeated</span>
                    <span class="value" id="result-kills">0</span>
                </div>
                <div class="stat-item">
                    <span class="label">Turns Taken</span>
                    <span class="value" id="result-turns">0</span>
                </div>
            </div>
            <div class="result-rewards" id="result-rewards">
                <h3>Rewards</h3>
                <div class="rewards-list"></div>
            </div>
            <div class="result-actions">
                <button class="result-btn" id="btn-result-continue">Continue</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <!-- Game Scripts -->
    <script src="src/js/utils.js"></script>
    <script src="src/js/storage.js"></script>
    <script src="src/js/audio.js"></script>
    <script src="src/js/units.js"></script>
    <script src="src/js/combat.js"></script>
    <script src="src/js/battlefield.js"></script>
    <script src="src/js/ai.js"></script>
    <script src="src/js/campaign.js"></script>
    <script src="src/js/painting.js"></script>
    <script src="src/js/multiplayer.js"></script>
    <script src="src/js/tutorial.js"></script>
    <script src="src/js/ui.js"></script>
    <script src="src/js/game.js"></script>
</body>
</html>
